---
import Layout from "../../layouts/Layout.astro";
import { getPhotos, getFileUrl } from "../../lib/pocketbase";

const photos = await getPhotos();
---

<Layout title="Photos">
  <div class="flex flex-col gap-6">
    <div>
      <h1 class="text-2xl md:text-4xl font-bold font-garamond">Photos</h1>
      <p class="text-text-muted mt-2">Taken on my Fujifilm X100VI.</p>
    </div>

    {
      photos.length === 0 ? (
        <p class="text-text-muted">Nothing here yet.</p>
      ) : (
        <div class="columns-2 md:columns-3 lg:columns-4 gap-4">
          {photos.map((photo) => (
            <div class="mb-4 break-inside-avoid">
              <img
                src={getFileUrl(photo, photo.image)}
                alt={photo.description || "Photo"}
                class="w-full rounded-lg hover:opacity-90 transition-opacity cursor-pointer"
                loading="lazy"
              />
            </div>
          ))}
        </div>
      )
    }
  </div>
</Layout>
