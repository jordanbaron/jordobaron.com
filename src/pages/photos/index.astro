---
import Layout from "../../layouts/Layout.astro";
import { getPhotos, getFileUrl } from "../../lib/pocketbase";
import { ClickableImage } from "../../components/ClickableImage";

const photos = await getPhotos();
---

<Layout title="Photos">
  <div class="flex flex-col gap-6">
    <div>
      <h1 class="text-2xl md:text-4xl font-bold font-garamond">Photos</h1>
      <p class="text-text-muted mt-2">Taken on my Fujifilm X100VI.</p>
    </div>

    {
      photos.length === 0 ? (
        <p class="text-text-muted">Nothing here yet.</p>
      ) : (
        <div class="columns-1 md:columns-2 lg:columns-3 gap-4">
          {photos.map((photo) => (
            <div class="mb-4 break-inside-avoid">
              <ClickableImage
                client:visible
                src={getFileUrl(photo, photo.image)}
                thumbSrc={getFileUrl(photo, photo.image, "600x0")}
                alt={photo.description || "Photo"}
              />
            </div>
          ))}
        </div>
      )
    }
  </div>
</Layout>
